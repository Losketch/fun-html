/*! For license information please see lifeGame.js.LICENSE.txt */
(()=>{var t,e={1286:()=>{window.parent.postMessage({type:"changeHeader",text:document.title},"*")},1908:()=>{"use strict";window.addEventListener("message",function(t){"outterColorSchemeChange"===t.data.type&&("dark"===t.data.colorScheme?document.documentElement.classList.add("dark"):"light"===t.data.colorScheme&&document.documentElement.classList.remove("dark"))})},3622:(t,e,n)=>{"use strict";n(1657),n(18),n(1286),n(1908);function r(){var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function c(n,r,o,i){var c=r&&r.prototype instanceof l?r:l,f=Object.create(c.prototype);return a(f,"_invoke",function(n,r,a){var o,i,c,l=0,f=a||[],s=!1,d={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return o=e,i=0,c=t,d.n=n,u}};function v(n,r){for(i=n,c=r,e=0;!s&&l&&!a&&e<f.length;e++){var a,o=f[e],v=d.p,p=o[2];n>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=v&&((a=n<2&&v<o[1])?(i=0,d.v=r,d.n=o[1]):v<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,d.n=p,i=0))}if(a||n>1)return u;throw s=!0,r}return function(a,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,p),i=f,c=p;(e=i<2?t:c)||!s;){o||(i?i<3?(i>1&&(d.n=-1),v(i,c)):d.n=c:d.v=c);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(s=d.n<0)?c:n.call(r,d))!==u)break}catch(e){o=t,i=1,c=e}finally{l=1}}return{value:e,done:s}}}(n,o,i),!0),f}var u={};function l(){}function f(){}function s(){}e=Object.getPrototypeOf;var d=[][o]?e(e([][o]())):(a(e={},o,function(){return this}),e),v=s.prototype=l.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,a(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=s,a(v,"constructor",s),a(s,"constructor",f),f.displayName="GeneratorFunction",a(s,i,"GeneratorFunction"),a(v),a(v,i,"Generator"),a(v,o,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:p}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function i(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},a(t,e,n,r)}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){i(o,r,a,c,u,"next",t)}function u(t){i(o,r,a,c,u,"throw",t)}c(void 0)})}}function u(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var f,s,d,v,p=[3],h=[2,3],m=2,b=document.getElementById("container"),g="export import importBtn generations jump rule state stateShow gridSize gridSizeShow gap gapShow start pause prev next save clear-generations reset set-rule".split(" ").map(function(t){return document.getElementById(t)}),y=(s=20,function(t){if(Array.isArray(t))return t}(f=g)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(f,s)||u(f,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=y[0],w=y[1],E=y[2],S=y[3],j=y[4],L=y[5],C=y[6],O=y[7],x=y[8],M=y[9],I=y[10],B=y[11],T=y[12],A=y[13],N=y[14],P=y[15],_=y[16],G=y[17],F=y[18],U=y[19],R=20,H=0,z=0,V=[],$={},q=-1,D=null,J=[],K=50,Q=BigInt(Math.floor(Math.log2(m-1))+1);function W(t){b.style.gridTemplateRows="repeat(".concat(t,", 1fr)"),b.style.gridTemplateColumns="repeat(".concat(t,", 1fr)"),d=t**2,b.innerHTML="";for(var e=0;e<d;e++){var n=document.createElement("cell");n.dataset.life="0",J.push(n),b.appendChild(n)}}function X(t){var e;null===(e=D)||void 0===e||e.remove(),D=document.createElement("style");for(var n=1/(t-1),r=1;r<t;r++)D.innerHTML+="\n      cell[data-life='".concat(r,"'] {\n        background-color: rgb(").concat(getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-cell-life-max"),", ").concat((t-r)*n,");\n      }\n    ");document.head.appendChild(D)}function Y(t){return t<0?t+R:t>d-1?t-R:t}function Z(t){var e=t-1;return Math.floor(e/R)!==Math.floor(t/R)&&(e+=R),Y(e)}function tt(t){var e=t+1;return Math.floor(e/R)!==Math.floor(t/R)&&(e-=R),Y(e)}function et(t){var e=t-R,n=t+R;return n-=n>d-1?d:0,[J[Z(e+=e<0?d:0)],J[e],J[tt(e)],J[Z(t)],J[tt(t)],J[Z(n)],J[n],J[tt(n)]].filter(function(t){return"1"===t.dataset.life}).length}function nt(t,e){return 1===t?h.includes(e)?1:++t>m-1?0:t:t>1?++t>m-1?0:t:p.includes(e)?1:0}function rt(){0===V.length&&at(),H++,bt(),z=H,bt();for(var t=0;t<d;t++){var e=J[t],n=et(t);e.dataset.lifeTemp=nt(+e.dataset.life,n)}J.forEach(function(t){return t.dataset.life=t.dataset.lifeTemp}),at()}function at(){for(var t=0n,e=0;e<d;e++)t<<=Q,t+=BigInt(J[e].dataset.life);V.push(t),$[H]=V.length-1}function ot(t){for(var e=d-1;e>=0;e--)J[e].dataset.life=t&2n**Q-1n,t>>=Q}function it(t){for(var e=[],n=t;n>0n;)e.unshift(Number(0xffn&n)),n>>=8n;return e}function ct(t){for(var e=[];t>0;)e.push(Number(255&t)),t>>=8;return e.reverse()}function ut(t){return Array.from(t).map(function(t){var e=t.toString(16);return e=(2===e.length?"":"0")+e}).join("")}function lt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){return e.disabled=t?"1":""})}function ft(){J.forEach(function(t){return t.dataset.life="0"}),lt(!1,N,P,T,j),clearInterval(v),H=0,z=0,bt(),V=[],$={}}function st(t){var e=function(t){var e=t.split("/"),n={};return e.forEach(function(t){switch(t[0]){case"B":n.birth=t.substring(1).split("").map(function(t){return parseInt(t,10)});break;case"S":n.star=t.substring(1).split("").map(function(t){return parseInt(t,10)});break;case"C":n.typeCount=+t.substring(1)}}),n}(t);p=e.birth,h=e.star,m=e.typeCount,vt()}function dt(){return(dt=c(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.n){case 0:return e=/B\d+\/S\d+\/C\d+/,t.n=1,prompt("输入规则（格式（正则）：B\\d+/S\\d+/C\\d+）\n默认B3/S23/C2");case 1:if(null!==(n=t.v)){t.n=2;break}return t.a(2);case 2:if(e.test(n)){t.n=3;break}return alert("非法规则"),t.a(2);case 3:return t.n=4,confirm("警告：这将会重置网格，是否设置规则？");case 4:if(!t.v){t.n=5;break}ft(),st(n),Q=BigInt(Math.floor(Math.log2(m-1))+1),X(m);case 5:return t.a(2)}},t)}))).apply(this,arguments)}function vt(){L.textContent=" 当前规则：B".concat(p.join(""),"/S").concat(h.join(""),"/C").concat(m)}function pt(){O.textContent="当前填充状态："+(-1===q?"无(切换模式)":q)}function ht(){M.textContent="当前网格大小："+R}function mt(){B.textContent="当前最小迭代间隔："+K+"ms"}function bt(){H>z&&(z=H),S.valueLabel="".concat(H,"/").concat(z),S.max=z,S.value=H}k.addEventListener("click",c(r().m(function t(){var e,n,a,i,c;return r().w(function(t){for(;;)switch(t.n){case 0:if(0!==V.length){t.n=1;break}return alert("现在还没有代，无法导出，请点击「保存为一代」按钮后重试。"),t.a(2);case 1:return e=new Uint8Array([Math.ceil((+p.join("")).toString(16).length/2)].concat(o(ct(+p.join(""))),[Math.ceil((+h.join("")).toString(16).length/2)],o(ct(+h.join(""))),[Math.ceil(m.toString(16).length/2)],o(ct(m)),[Math.ceil(R.toString(16).length/2)],o(ct(R)),o(it(V[$[H]])))),n=new Blob([e],{type:"application/octet-stream"}),a=URL.createObjectURL(n),i=document.createElement("a"),t.n=2,prompt("请输入文件名（无后缀名）（点击取消则使用默认文件名）");case 2:c=t.v,i.href=a,i.download=null===c||""===c?"data.bin":c+".bin",i.click();case 3:return t.a(2)}},t)}))),w.addEventListener("change",function(t){var e=t.target.files[0];if(e){var n=new FileReader;n.addEventListener("load",c(r().m(function e(){var a,o,i,c,u,l,f;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,confirm("警告：这将会重置网格，是否导入？");case 1:if(!e.v){e.n=7;break}a=new Uint8Array(n.result),o=[],c=!1,u=0,l=0;case 2:if(!(l<a.length)){e.n=6;break}if(!c){e.n=3;break}o.push(parseInt(ut(a.slice(l,l+u)),16)),l+=u-1,c=!1,e.n=5;break;case 3:if(!(o.length<4)){e.n=4;break}u=a[l],c=!0,e.n=5;break;case 4:return i=BigInt("0x"+ut(a.slice(l))),e.a(3,6);case 5:l++,e.n=2;break;case 6:alert("规则：B".concat(o[0],"/S").concat(o[1],"/C").concat(o[2]," 网格大小：").concat(o[3])),st("B".concat(o[0],"/S").concat(o[1],"/C").concat(o[2])),R=o[3],Q=BigInt(Math.floor(Math.log2(m-1))+1),d=R**2,J=[],W(R),X(m),ft(),ht(),ot(i),t.target.value="";case 7:e.n=9;break;case 8:return e.p=8,f=e.v,alert("导入时发生错误：\n".concat(f.stack)),e.a(2);case 9:return e.a(2)}},e,null,[[0,8]])}))),n.readAsArrayBuffer(e)}}),S.addEventListener("input",function(t){H=t.target.value,ot(V[$[H]]),bt()}),j.addEventListener("click",c(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,prompt("输入要跳转的代的编号");case 1:if(null!==(e=t.v)){t.n=2;break}return t.a(2);case 2:if(!isNaN(e)&&""!==e){t.n=3;break}return alert("代的编号必须是数字"),t.a(2);case 3:if(!(e<0||e>z)){t.n=4;break}return alert("指定的代不存在"),t.a(2);case 4:ot(V[$[H=e]]),bt();case 5:return t.a(2)}},t)}))),C.addEventListener("click",c(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,prompt("点击细胞时后胞变成的状态\n输入状态（留空则使用切换模式，0为擦除模式）");case 1:if(null!==(e=t.v)){t.n=2;break}return t.a(2);case 2:if(""!==e){t.n=3;break}q=-1,t.n=7;break;case 3:if(!isNaN(e)){t.n=4;break}return alert("填充状态必须为数字"),t.a(2);case 4:if(!(+e>m-1)){t.n=5;break}return alert("填充状态不能超过C规则的值减一"),t.a(2);case 5:if(!(+e<0)){t.n=6;break}return alert("填充状态不能小于0"),t.a(2);case 6:q=Math.floor(+e);case 7:pt();case 8:return t.a(2)}},t)}))),x.addEventListener("click",c(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,prompt("输入网格大小");case 1:if(null!==(e=t.v)){t.n=2;break}return t.a(2);case 2:if(!isNaN(e)){t.n=3;break}return alert("网格大小必须为数字"),t.a(2);case 3:if(!(+e<=0)){t.n=4;break}return alert("网格大小必须大于0"),t.a(2);case 4:if(!(+e>100)){t.n=5;break}return alert("网格大小不能超过100"),t.a(2);case 5:return t.n=6,confirm("警告：这将会重置网格，是否重设网格大小？");case 6:if(!t.v){t.n=7;break}d=(R=+e)**2,J=[],W(e),ht(),ft();case 7:return t.a(2)}},t)}))),I.addEventListener("click",c(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,prompt("输入迭代间隔(ms)");case 1:if(e=t.v,!isNaN(e)){t.n=2;break}return alert("迭代间隔必须为数字"),t.a(2);case 2:if(!(+e<3)){t.n=3;break}return alert("迭代间隔不能小于3ms"),t.a(2);case 3:if(!(+e>5e3)){t.n=4;break}return alert("迭代间隔不能超过5000ms"),t.a(2);case 4:K=e,mt();case 5:return t.a(2)}},t)}))),N.addEventListener("click",function(){--H>=0?ot(V[$[H]]):H=0,bt()}),P.addEventListener("click",rt),F.addEventListener("click",ft),U.addEventListener("click",function(){return dt.apply(this,arguments)}),T.addEventListener("click",function(){clearInterval(v),v=setInterval(rt,K),lt(!0,N,P,j,T)}),A.addEventListener("click",function(){clearInterval(v),lt(!1,N,P,T,j)}),_.addEventListener("click",function(){H++,bt(),at()}),G.addEventListener("click",function(){V=[],$={},H=0,z=0,bt()}),window.addEventListener("message",function(t){"outterColorSchemeChange"===t.data.type&&X(m)}),b.addEventListener("click",function(t){var e=t.target;if("CELL"===e.tagName)if(-1===q){var n=+e.dataset.life;n++,e.dataset.life=n>m-1?0:n}else e.dataset.life=q}),E.addEventListener("click",function(){w.click()}),W(R),X(m),vt(),pt(),ht(),mt()}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,t=[],r.O=(e,n,a,o)=>{if(!n){var i=1/0;for(f=0;f<t.length;f++){for(var[n,a,o]=t[f],c=!0,u=0;u<n.length;u++)(!1&o||i>=o)&&Object.keys(r.O).every(t=>r.O[t](n[u]))?n.splice(u--,1):(c=!1,o<i&&(i=o));if(c){t.splice(f--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[n,a,o]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.j=119,(()=>{var t={119:0,409:0,676:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var a,o,[i,c,u]=n,l=0;if(i.some(e=>0!==t[e])){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(u)var f=u(r)}for(e&&e(n);l<i.length;l++)o=i[l],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(f)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var a=r.O(void 0,[96,409,676,456],()=>r(3622));a=r.O(a)})();